<!DOCTYPE html>
<html>
  <head>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-159239795-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    <title>ArcGIS for Developer 開発リソース集</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-03-23T20:52:17 JST">
<title>ウィジェット開発 :: ArcGIS for Developer 開発リソース集</title>
<link rel="shortcut icon" href="/arcgis-dev-resources/images/favicon.png" type="image/x-icon" />
<link href="/arcgis-dev-resources/css/font-awesome.min.css" rel="stylesheet">
<link href="/arcgis-dev-resources/css/nucleus.css" rel="stylesheet">
<link href="/arcgis-dev-resources/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/arcgis-dev-resources/css/bootstrap.min.css">
<script src="/arcgis-dev-resources/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/esrijapan.github.io\/arcgis-dev-resources";
</script>
<meta name="description" content="ウィジェットと呼ばれる、再利用可能な UX コンポーネント作成の基礎を紹介します。">



    
  </head>
  <body data-url="/arcgis-dev-resources/tips/javascript/custom-widget/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://esrijapan.github.io/arcgis-dev-resources">ArcGIS for Developer 開発リソース集</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/EsriJapan/arcgis-dev-resources"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/arcgis-dev-resources/" class="dd-item">
          <a href="/arcgis-dev-resources/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/arcgis-dev-resources/guide/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/guide/">スタートアップ ガイド</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/arcgis-dev-resources/guide/create-map/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/guide/create-map/">マップの作成</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/guide/create-map/get-dev-account/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-map/get-dev-account/">
            開発者アカウントの作成
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/create-map/create-feature-service/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-map/create-feature-service/">
            フィーチャサービスの作成
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/create-map/create-webmap/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-map/create-webmap/">
            Web マップの作成
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/guide/create-app/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/guide/create-app/">アプリの作成</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/guide/create-app/create-startup-app-js/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-app/create-startup-app-js/">
            JavaScript
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/create-app/create-startup-app-dotnet/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-app/create-startup-app-dotnet/">
            .NET
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/create-app/create-startup-app-android/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-app/create-startup-app-android/">
            Android
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/create-app/create-startup-app-ios/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/create-app/create-startup-app-ios/">
            iOS
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/guide/authentication/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/guide/authentication/">認証</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/guide/authentication/authentication/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/authentication/authentication/">
            認証パターン
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/authentication/register-app/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/authentication/register-app/">
            アプリの登録と認証
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/guide/authentication/proxy-services/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/guide/authentication/proxy-services/">
            プロキシ サービスの利用
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/">技術 Tips 集</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/arcgis-dev-resources/tips/javascript/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/javascript/">ArcGIS API for JavaScript</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/install-jsapi/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/install-jsapi/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/choose-3.x-and-4.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/choose-3.x-and-4.x/">
            バージョン 4.x と 3.x の選択
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/migrating-from-3.x-to-4.0/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/migrating-from-3.x-to-4.0/">
            バージョン 3.x から 4.x への移行
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/custom-widget/" class="dd-item active">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/custom-widget/">
            ウィジェット開発
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/arcade/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/arcade/">
            Arcade
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/javascript/custom-font/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/javascript/custom-font/">
            カスタム フォント
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/webappbuilder/">Web AppBuilder for ArcGIS (Developer Edition)</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/install-guide/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/webappbuilder/install-guide/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/development-guide/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/webappbuilder/development-guide/">
            カスタム ウィジェット開発ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/deploy-pattern/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/webappbuilder/deploy-pattern/">
            デプロイ パターン
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/deploy-your-app/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/webappbuilder/deploy-your-app/">
            Web アプリケーションのデプロイ
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/webappbuilder/widget-list/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/webappbuilder/widget-list/">
            ウィジェット一覧表
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/dotnet/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/dotnet/">ArcGIS Runtime SDK for .NET</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/dotnet/install-dotnet-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/dotnet/install-dotnet-100.x/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/dotnet/distribution-dotnet-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/dotnet/distribution-dotnet-100.x/">
            アプリケーション配布ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/dotnet/migration-dotnet-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/dotnet/migration-dotnet-100.x/">
            バージョン 10.2.x から 100.x への移行
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/android/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/android/">ArcGIS Runtime SDK for Android</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/android/install-android-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/android/install-android-100.x/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/android/distribution-android-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/android/distribution-android-100.x/">
            アプリケーション配布ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/android/migration-android-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/android/migration-android-100.x/">
            バージョン 10.2.x から 100.x への移行
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/ios/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/ios/">ArcGIS Runtime SDK for iOS</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/ios/install-ios-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/ios/install-ios-100.x/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/ios/distribution-ios-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/ios/distribution-ios-100.x/">
            アプリケーション配布ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/ios/migration-ios-100.x/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/ios/migration-ios-100.x/">
            バージョン 10.2.x から 100.x への移行
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/visualization/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/visualization/">データ ビジュアライゼーション</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/visualization/workflow-with-arcgis/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/visualization/workflow-with-arcgis/">
            データ可視化のワークフロー
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/visualization/data-visualization-procedure/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/visualization/data-visualization-procedure/">
            データ可視化の手順
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/visualization/6ways-to-improve-your-maps/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/visualization/6ways-to-improve-your-maps/">
            地図上に賢くデータを可視化するための 6 つの方法
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/tips/python/" class="dd-item haschildren
        ">
      <div>
      <a href="/arcgis-dev-resources/tips/python/">ArcGIS API for Python</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/arcgis-dev-resources/tips/python/python-api-concepts/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/python-api-concepts/">
            ArcGIS API for Python のコンセプト
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/python-api-conda/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/python-api-conda/">
            ArcGIS API for Python のための基礎環境：conda入門
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/python-api-install/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/python-api-install/">
            インストール ガイド
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/python-api-jnsetup/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/python-api-jnsetup/">
            Jupyter Notebook を使ってみよう
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/python-api-jnlabsetup/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/python-api-jnlabsetup/">
            Jupyter Lab を使ってみよう
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/automate-tasks/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/automate-tasks/">
            スクリプト実行の自動化
          </a>
        </div>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/python/matplotlib-japanese/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/python/matplotlib-japanese/">
            matplotlib での日本語利用について
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/arcgis-dev-resources/tips/hackathon/" class="dd-item">
        <div>
          <a href="/arcgis-dev-resources/tips/hackathon/">
            ミートアップ
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/arcgis-dev-resources/samples/" class="dd-item
        ">
      <div>
      <a href="/arcgis-dev-resources/samples/">サンプル集</a>
      </div>
    </li>




    </ul>
    <section><center>
<br>© Esri Japan. All rights reserved.<br>
</center>

    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>メニュー: 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/arcgis-dev-resources/guide/" >
   スタートアップ ガイド</option> 
    <option value="/arcgis-dev-resources/guide/create-map/" >
  - 
   マップの作成</option>
    <option value="/arcgis-dev-resources/guide/create-app/" >
  - 
   アプリの作成</option>
    <option value="/arcgis-dev-resources/guide/authentication/" >
  - 
   認証</option>
  
    <option value="/arcgis-dev-resources/tips/" >
   技術 Tips 集</option> 
    <option value="/arcgis-dev-resources/tips/javascript/" >
  - 
   ArcGIS API for JavaScript</option> 
      <option value="/arcgis-dev-resources/tips/javascript/install-jsapi/" >-- インストール ガイド</option>
      <option value="/arcgis-dev-resources/tips/javascript/choose-3.x-and-4.x/" >-- バージョン 4.x と 3.x の選択</option>
      <option value="/arcgis-dev-resources/tips/javascript/migrating-from-3.x-to-4.0/" >-- バージョン 3.x から 4.x への移行</option>
      <option value="/arcgis-dev-resources/tips/javascript/custom-widget/"  selected>-- ウィジェット開発</option>
      <option value="/arcgis-dev-resources/tips/javascript/arcade/" >-- Arcade</option>
      <option value="/arcgis-dev-resources/tips/javascript/custom-font/" >-- カスタム フォント</option>
  
    <option value="/arcgis-dev-resources/tips/webappbuilder/" >
  - 
   Web AppBuilder for ArcGIS (Developer Edition)</option>
    <option value="/arcgis-dev-resources/tips/dotnet/" >
  - 
   ArcGIS Runtime SDK for .NET</option>
    <option value="/arcgis-dev-resources/tips/android/" >
  - 
   ArcGIS Runtime SDK for Android</option>
    <option value="/arcgis-dev-resources/tips/ios/" >
  - 
   ArcGIS Runtime SDK for iOS</option>
    <option value="/arcgis-dev-resources/tips/visualization/" >
  - 
   データ ビジュアライゼーション</option>
    <option value="/arcgis-dev-resources/tips/python/" >
  - 
   ArcGIS API for Python</option>
      <option value="/arcgis-dev-resources/tips/hackathon/" >- ミートアップ</option>
  
    <option value="/arcgis-dev-resources/samples/" >
   サンプル集</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="検索...">
        </div>
        <script type="text/javascript" src="/arcgis-dev-resources/js/lunr.min.js"></script>
        <script type="text/javascript" src="/arcgis-dev-resources/js/auto-complete.js"></script>
        <link href="/arcgis-dev-resources/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/esrijapan.github.io\/arcgis-dev-resources";
          
        </script>
        <script type="text/javascript" src="/arcgis-dev-resources/js/search.js"></script>
      </div>
    

    <h1>ウィジェット開発</h1>
    
    
    
    

<p>ウィジェットは再利用可能な UI コンポーネントで、リッチな UX を提供する鍵となります。ArcGIS API for JavaScript はすぐに使えるウィジェットを提供しています。また、バージョン 4.2 からは、独自の機能を持つカスタム ウィジェットを作成する基盤を提供します。</p>

<p>このガイドは、ウィジェット開発の新しいフレームワークへ移行するときに重視すべきトピックを説明することで、ウィジェット開発の基本を説明します。カスタム ウィジェット作成の基盤は、ウィジェットに実装する機能にかかわらず一貫しています。</p>

<p>このフレームワークはすべての <a href="https://dojotoolkit.org/reference-guide/1.10/dijit/" target="_blank">Dijit</a> を直接差し替えることを意図していません。例えば、<a href="http://dgrid.io/" target="_blank">dgrid</a> の利用には Dijit が必要です。</p>

<p>トピック</p>

<ul>
<li><a href="#開発要件">開発要件</a></li>
<li><a href="#ウィジェット-ライフサイクル">ウィジェット ライフサイクル</a></li>
<li><a href="#ウィジェットの実装">ウィジェットの実装</a></li>
<li><a href="#typescript-デコレーター">TypeScript デコレーター</a></li>
<li><a href="#サンプルコード">サンプルコード</a></li>
<li><a href="#関連リンク">関連リンク</a></li>
</ul>

<p>このガイドはウィジェットのフレームワークの大まかな概要を説明しています。どのようにカスタム ウィジェットを作成するかは、<a href="https://developers.arcgis.com/javascript/latest/sample-code/widgets-custom-helloworld/index.html" target="_blank">Hello World</a> や <a href="https://developers.arcgis.com/javascript/latest/sample-code/widgets-custom-recenter/index.html" target="_blank">Recenter widget</a> のサンプルをご参照ください。</p>

<h2 id="開発要件">開発要件</h2>

<p>カスタム ウィジェットを作成する前に、開発に必要となる要件を確認してください。要件は、作成するウィジェットにより異なります。以下はウィジェット開発に最低限必要な要件です。</p>

<h3 id="typescript">TypeScript</h3>

<p><a href="https://www.typescriptlang.org/" target="_blank">TypeScript</a> は JavaScript のスーパーセットです。TypeScript で書かれたコードは、JavaScript にコンパイルされます。ウィジェット開発には TypeScript を使用することが推奨されています。インターネット上には、TypeScript とは何か、なぜ使われるのか、そしてどのように使うのかを詳細に知ることのできる多数の<a href="https://www.sitepen.com/blog/2013/12/31/definitive-guide-to-typescript" target="_blank">リソース</a>があります。これらの基本を理解することで、ウィジェット開発の過程をより簡単に進めることができます。</p>

<h3 id="jsx">JSX</h3>

<p><a href="https://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank">JSX</a> は HTML と同じようにウィジェットの UI を表現することができる JavaScript の拡張シンタックスです。JSX は HTML に似ており、JavaScript に埋め込んで使用することができます。</p>

<h3 id="esri-core-accessor-の理解">esri/core/Accessor の理解</h3>

<p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html" target="_blank">Accessor</a> は 4.x の主要な特徴のひとつであり、ウィジェットを含むすべてのクラスの基盤です。どのように動作するのか、使用パターンなどの詳細は <a href="https://developers.arcgis.com/javascript/latest/guide/implementing-accessor/index.html" target="_blank">Implementing Accessor</a> をご参照ください。</p>

<h2 id="ウィジェット-ライフサイクル">ウィジェット ライフサイクル</h2>

<p>開発をはじめる前に、ウィジェット ライフサイクルを理解している必要があります。ウィジェットの種類にかかわらず、ライフサイクル特有の一般的な概念は同じです。</p>

<ol>
<li>constructor (params) - プロパティを設定している間に、ウィジェットが最初に作成されるところです。ウィジェットは Accessor から生じるので、get、set、watch を使いプロパティへアクセスできます（get、set、watch の詳細は <a href="https://developers.arcgis.com/javascript/latest/guide/working-with-props/index.html" target="_blank">Working with properties</a> をご参照ください）。</li>
<li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#postInitialize" target="_blank">postInitialize()</a> - このメソッドは、ウィジェット作成後、UI の描画前に呼ばれます。</li>
<li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#render" target="_blank">render()</a> - ウィジェット開発で唯一の必須となるメソッドです。UI を描画するために使用されます。</li>
<li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#destroy" target="_blank">destroy()</a> - ウィジェットのインスタンスを解放するためのメソッドです。</li>
</ol>

<h2 id="ウィジェットの実装">ウィジェットの実装</h2>

<p>まず、ベースとなる <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html" target="_blank">Widget</a> クラスを拡張することによりウィジェットを作成することからはじめます。</p>

<pre><code class="language-ts">// 拡張に使用する Widget クラスのインポート
import Widget = require(&quot;esri/widgets/Widget&quot;);

@subclass(&quot;esri.widgets.HelloWorld&quot;)
class HelloWorld extends declared(Widget) {

}
</code></pre>

<p>次に、ウィジェット特有のプロパティとメソッドを実装します。このコードは、プロパティ作成において、デコレーターをどのように利用するのかを示しています。</p>

<pre><code class="language-ts">// 'name' プロパティの作成
@property()
@renderable()
name: string = &quot;John Smith&quot;;

// 'emphasized' プロパティの作成
@property()
@renderable()
emphasized: boolean = false;

// プライベートな _onNameUpdate メソッドの作成
private _onNameUpdate(): string { return '${this.name}';}
</code></pre>

<p>デフォルトでは、要素の中で参照される関数は、実際の要素を参照する <code>this</code> を持ちます。必要に応じて、<code>this</code> の参照先を変更するために <code>bind</code> 属性を使用します。以下では、<code>name</code> プロパティを更新するときに呼ばれる <code>_onNameUpdate</code> コールバック関数を結び付けています。これは次の <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#postInitialize" target="_blank">postInitialize</a> メソッドに表示されます。</p>

<pre><code class="language-ts">class HelloWorld extends declared(Widget) {

  constructor() {
    super();
    this._onNameUpdate = this._onNameUpdate.bind(this);
  }

}
</code></pre>

<p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#postInitialize" target="_blank">postInitialize</a> メソッドは、ウィジェットのプロパティは用意されているが、描画される前に呼ばれます。以下のコードは <code>name</code> プロパティを監視しています。プロパティが更新されると、<code>_onNameUpdate</code> コールバック関数を呼びます。<code>watchUtils.init()</code> は <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#WatchHandle" target="_blank">WatchHandle</a> オブジェクトを返し、<code>this.own()</code> に渡されます。これは、ウィジェットを削除した時点で、リソースを解放するメソッドです。</p>

<pre><code class="language-ts">postInitialize() {
  const handle = watchUtils.init(this, &quot;name&quot;, this._onNameUpdate);

  // ウィジェットが削除された時点でリソースを解放するメソッド
  this.own(handle);
}
</code></pre>

<p>プロパティが実装された後、ウィジェットの UI は <a href="https://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank">JSX</a> を使用して描画されます。これはウィジェットの <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#render" target="_blank">renderer</a> メソッドに処理されます。</p>

<p>ベースとなる CSS は <code>class</code> 属性に設定されます。class 属性はクラスが変更されないときに使用されます。動的にクラスを変更したいときは、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-support-widget.html#classes" target="_blank">classes</a> を使います。これは、切り替え可能な CSS クラスを表すプロパティを持ったオブジェクトです。CSS クラスは、プロパティの値が true のときに追加され、false のときに削除されます。</p>

<pre><code class="language-ts">// UI の描画
render() {
  const classes = { &quot;hello-world-emphasized&quot;: this.emphasized };
  return (
    &lt;div class = &quot;hello-world&quot; classes={classes}&gt;{this._onNameUpdate()}&lt;/div&gt;
  );
}
</code></pre>

<p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-support-widget.html#join" target="_blank">classes</a> と同様に、<code>styles</code> は動的にスタイルを適用することができます。<code>styles</code> のプロパティの値は文字列であることに注意してください。詳細は、<a href="https://developers.arcgis.com/javascript/latest/guide/styling/index.html" target="_blank">Styling</a> トピックをご参照ください。</p>

<pre><code class="language-ts">render() {
  const dynamicStyles = {
    background-color: this.__hasBackgroundColor ? &quot;chartreuse&quot; : &quot;&quot;
  };

  return (
    &lt;div styles={dynamicStyles}&gt;Hello World!&lt;/div&gt;
  );
}
</code></pre>

<p><strong>renderer() メソッドは、ウィジェットを実装するために必要となる唯一の必須メソッドです。</strong></p>

<p>最後に、<code>this.destroy()</code> を呼びます。このメソッドはウィジェットを削除し、<code>postInitialize()</code> 内で参照されている <code>own()</code> メソッドに登録された、すべてのリソースを解放します。</p>

<pre><code class="language-ts">postInitialize() {
  const handle = watchUtils.init(this, &quot;name&quot;, this._onNameUpdate);

  // ウィジェットが削除された時点でリソースを解放するメソッド
  this.own(handle);
}
</code></pre>

<h3 id="typescript-デコレーター">TypeScript デコレーター</h3>

<p>ウィジェット開発は <a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank">TypeScript のデコレーター</a>を利用します。デコレーターは、設計時に、既にあるプロパティ、メソッド、コンストラクタの中にある共通する振る舞いを定義、変更します。以下は、ウィジェットで使用される、もっとも一般的なデコレーターです。</p>

<h3 id="subclass-declared-と共に使われます"><code>@subclass</code>（<code>declared</code> と共に使われます）</h3>

<p>これらは、4.x のクラスに結びつけられる基本となるデコレーターです。</p>

<p>以下のコードは <code>esri/widgets/Widget</code> クラスをインポートし、拡張して、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html#render" target="_blank">renderer</a> メソッド内で UI を定義しています。<a href="https://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank">JSX</a> は UI を定義するために使われています。この例では、<code>div</code> 要素と <code>div</code> 要素内に <code>John Smit</code> が作られます。</p>

<pre><code class="language-ts">import Widget = require(&quot;esri/widgets/Widget&quot;);

@subclass(&quot;esri.widgets.HelloWorld&quot;)
class HelloWorld extends declared(Widget) {
  render() {
    return (
      &lt;div&gt;John Smith&lt;/div&gt;
    );
  }
}
</code></pre>

<h3 id="property"><code>@property()</code></h3>

<p>この<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-accessorSupport-decorators.html#property" target="_blank">デコレーター</a>は <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html" target="_blank">Accessor</a> プロパティを定義するために使われます。このデコレーターで定義されたプロパティは、<code>get</code>、<code>set</code>、<code>watch</code> を使用できます。</p>

<pre><code class="language-ts">@property()
name: string;
</code></pre>

<h3 id="renderable"><code>@renderable()</code></h3>

<p>この<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-support-widget.html#renderable" target="_blank">デコレーター</a>は描画をスケジューリングするために使われます。プロパティが修正されたとき、自動的に描画をスケジューリングし、更新します。</p>

<pre><code class="language-ts">@renderable()
name: string;
</code></pre>

<p>通常、プロパティを実装するときは、<code>@property()</code> と <code>@renderable()</code> の両方を使います。</p>

<pre><code class="language-ts"> @property()
 @renderable()
 name: string;
</code></pre>

<h3 id="aliasof"><code>@aliasOf()</code></h3>

<p>この<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-accessorSupport-decorators.html#aliasOf" target="_blank">デコレーター</a>はプロパティ エイリアスを定義します。これは、既にあるプロパティが重複しないようにコードを保つために使用されます（例えば ViewModel の内側に既に実装されています）。<em>このガイドで提供するサンプルはこのデコレーターを使っていません。もし、このファイルと関連する <code>HelloWroldViewModel</code> があるとき、この方法を通して直接プロパティへアクセスします。これにより、コードの重複を避けることができます。</em></p>

<pre><code class="language-ts">@aliasOf(&quot;viewModel.name&quot;)
name: string;
</code></pre>

<h2 id="サンプルコード">サンプルコード</h2>

<p>以下は、このガイドで説明したサンプルコードをまとめたものです。クラスは TypeScript で書かれ、TSX 拡張子で保存されます。TSX 拡張子は、作成するクラスが JSX を使っていることを示しています。</p>

<pre><code class="language-ts">/// &lt;amd-dependency path=&quot;esri/core/tsSupport/declareExtendsHelper&quot; name=&quot;__extends&quot; /&gt;
/// &lt;amd-dependency path=&quot;esri/core/tsSupport/decorateHelper&quot; name=&quot;__decorate&quot; /&gt;

// Import decorator modules
import {subclass, declared} from &quot;esri/core/accessorSupport/decorators&quot;;
// Import decorator module and jsxFactory used for rendering
import {renderable, jsxFactory} from &quot;esri/widgets/support/widget&quot;;

// Import used to extend off of base Widget class
import Widget = require(&quot;esri/widgets/Widget&quot;);

@subclass(&quot;esri.widgets.HelloWorld&quot;)
class HelloWorld extends declared(Widget) {

  postInitialize() {
    const handle = watchUtils.init(this, &quot;name&quot;, this._onNameUpdate);

    // Helper used for cleaning up resources once the widget is destroyed
    this.own(handle);
  }

  // Create 'name' property
  @property()
  @renderable()
  name: string = &quot;John Smith&quot;;

  // Create 'emphasized' property
  @property()
  @renderable()
  emphasized: boolean = false;

  // Create private _onNameUpdate method
  private _onNameUpdate(): string { return '${this.name}';}

  // Render the UI
  render() {
    const classes = { &quot;hello-world-emphasized&quot;: this.emphasized };
    return (
      &lt;div class = &quot;hello-world&quot; join={classes}&gt;{this._onNameUpdate()}&lt;/div&gt;
    );
  }
}

export = HelloWorld;
</code></pre>

<h2 id="関連リンク">関連リンク</h2>

<ul>
<li><a href="https://developers.arcgis.com/javascript/latest/guide/custom-widget/index.html" target="_blank">Widget development</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/sample-code/widgets-custom-helloworld/index.html" target="_blank">Hello World</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/sample-code/widgets-custom-recenter/index.html" target="_blank">Recenter widget</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html" target="_blank">Accessor class</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/guide/working-with-props/index.html" target="_blank">Guide - Working with properties</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/guide/implementing-accessor/index.html" target="_blank">Implementing Accessor</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/sample-code/widgets-custom-recenter/index.html" target="_blank">Recenter sample</a>（英語）</li>
<li><a href="https://developers.arcgis.com/javascript/latest/guide/styling/index.html" target="_blank">Styling</a>（英語）</li>
<li><a href="https://www.typescriptlang.org/" target="_blank">TypeScript</a>（英語）</li>
<li><a href="https://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank">JSX</a>（英語）</li>
<li><a href="../migrating-from-3.x-to-4.0/#プロパティのハンドリング">バージョン 3.x から 4.x への移行</a></li>
<li><a href="https://github.com/EsriJapan/workshops/tree/master/20190823_app-development-hands-on/HandsOn_Document/03_Widget_Development">ArcGIS API for JavaScript を利用したウィジェット開発ハンズオン</a></li>
</ul>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/arcgis-dev-resources/tips/javascript/migrating-from-3.x-to-4.0/" title="バージョン 3.x から 4.x への移行"> <i class="fa fa-chevron-left"></i><label>バージョン 3.x から 4.x への移行</label></a>
    <a class="nav nav-next" href="/arcgis-dev-resources/tips/javascript/arcade/" title="Arcade" style="margin-right: 0px;"><label>Arcade</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
     
  



	</div>
</footer>

<script src="/arcgis-dev-resources/js/clipboard.min.js"></script>

<link href="/arcgis-dev-resources/css/featherlight.min.css" rel="stylesheet">
<script src="/arcgis-dev-resources/js/featherlight.min.js"></script>



<script src="/arcgis-dev-resources/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>